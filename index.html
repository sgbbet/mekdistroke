<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generator Struk Otomatis (0.5x)</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f0f2f5;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px 0;
    }
    .controls {
        background-color: #ffffff;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        margin-bottom: 20px;
        text-align: center;
    }
    .controls h3 {
        margin-top: 0;
        margin-bottom: 15px;
        color: #333;
    }
    .button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        margin: 5px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.3s;
    }
    .button:hover {
        background-color: #0056b3;
    }
    .receipt-container {
        background-color: #ffffff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        width: 350px;
        max-width: 90%;
        /* --- PERUBAHAN DI SINI --- */
        transform: scale(0.5);
        transform-origin: top; /* Agar skala mengecil dari atas */
    }
    .header {
        text-align: center;
        margin-bottom: 25px;
    }
    .header h1 {
        font-size: 1.1em;
        color: #555;
        margin: 0;
    }
    .header p {
        font-size: 1.5em;
        font-weight: bold;
        color: #000;
        margin: 5px 0;
    }
    .session-info {
        display: flex;
        justify-content: space-between;
        font-size: 0.9em;
        color: #555;
        border-bottom: 1px solid #eee;
        padding-bottom: 15px;
        margin-bottom: 15px;
    }
    .location-box {
        border: 1px solid #ddd;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 25px;
    }
    .location-box h2 {
        font-size: 1em;
        font-weight: bold;
        margin: 0 0 8px 0;
    }
    .location-box p {
        font-size: 0.9em;
        color: #555;
        line-height: 1.4;
        margin: 0;
    }
    .details-title {
        font-size: 1.1em;
        font-weight: bold;
        margin-bottom: 15px;
    }
    .item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-size: 0.95em;
    }
    .item .label {
        color: #333;
    }
    .item .value {
        color: #000;
        font-weight: 500;
    }
    .subtotal {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
        padding-top: 15px;
        border-top: 2px solid #eee;
        font-weight: bold;
        font-size: 1em;
    }
    .total {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 2px solid #000;
        font-weight: bold;
        font-size: 1.2em;
    }
    .payment-method {
        display: flex;
        justify-content: space-between;
        margin-top: 5px;
        font-size: 0.95em;
        color: #333;
    }
</style>
</head>
<body>

<div class="controls">
    <h3>Pilih Rentang Harga</h3>
    <button class="button" onclick="generateReceipt('low')">Di Bawah 30rb</button>
    <button class="button" onclick="generateReceipt('medium')">30rb - 60rb</button>
    <button class="button" onclick="generateReceipt('high')">Di Atas 100rb</button>
</div>

<div class="receipt-container">
    <div class="header">
        <h1>Hi Eka Rianus</h1>
        <p>Thank you for charging<br>with Voltron at Waskita<br>Rajawali Tower</p>
    </div>

    <div class="session-info">
        <div>
            <div>Session ID</div>
            <div><strong id="session-id"></strong></div>
        </div>
        <div style="text-align: right;">
            <div id="date"></div>
            <strong id="time"></strong>
        </div>
    </div>

    <div class="location-box">
        <h2>Waskita Rajawali Tower</h2>
        <p>Jl. Letjen M.T. Haryono No.Kav. 12-13, RT.4/RW.11, Bidara Cina, Kecamatan Jatinegara, Kota Jakarta Timur, Daerah Khusus Ibukota Jakarta 13330, Indonesia</p>
    </div>

    <div class="details-title">Session Details</div>

    <div class="details">
        <div class="item">
            <span class="label">Energy Delivered</span>
            <span class="value" id="energy-delivered"></span>
        </div>
        <div class="item">
            <span class="label">Energy Price</span>
            <span class="value" id="energy-price"></span>
        </div>
        <div class="item">
            <span class="label">PJN (5%)</span>
            <span class="value" id="pjn"></span>
        </div>
        <div class="item">
            <span class="label">Connection Fee</span>
            <span class="value">Rp 0</span>
        </div>
        <div class="item">
            <span class="label">Admin Fee</span>
            <span class="value" id="admin-fee"></span>
        </div>
    </div>

    <div class="subtotal">
        <span class="label">Subtotal</span>
        <span class="value" id="subtotal"></span>
    </div>
    <div class="item" style="margin-top: 10px;">
        <span class="label">VAT (11%)</span>
        <span class="value" id="vat"></span>
    </div>

    <div class="total">
        <span class="label">Total Payable</span>
        <span class="value" id="total-payable"></span>
    </div>
    <div class="payment-method">
        <span class="label">Paid with GoPay</span>
        <span class="value" id="paid-with"></span>
    </div>
</div>

<script>
    function formatRupiah(number) {
        return new Intl.NumberFormat('id-ID', {
            style: 'currency',
            currency: 'IDR',
            minimumFractionDigits: 0
        }).format(number).replace('Rp', 'Rp ');
    }

    function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateReceipt(range) {
        // --- 1. Generate Base Values ---
        let energyPrice;
        if (range === 'low') {
            energyPrice = getRandomInt(15000, 25000);
        } else if (range === 'high') {
            energyPrice = getRandomInt(95000, 150000);
        } else { // medium
            energyPrice = getRandomInt(30000, 55000);
        }

        const energyDelivered = (energyPrice / 2500 * getRandomInt(95, 105) / 100).toFixed(3);
        const adminFee = 4000;

        // --- 2. Calculations ---
        const pjn = energyPrice * 0.05;
        const subtotal = energyPrice + pjn + adminFee;
        const vat = subtotal * 0.11;
        const totalPayable = subtotal + vat;
        
        // --- 3. Generate Session ID and Date ---
        const sessionId = getRandomInt(100000, 999999);
        const now = new Date();
        const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
        const timeOptions = { hour: '2-digit', minute: '2-digit', hour12: true };
        
        // --- 4. Update HTML Elements ---
        document.getElementById('session-id').textContent = sessionId;
        document.getElementById('date').textContent = now.toLocaleDateString('en-US', dateOptions) + ',';
        document.getElementById('time').textContent = now.toLocaleTimeString('en-US', timeOptions);

        document.getElementById('energy-delivered').textContent = `${energyDelivered.replace('.', ',')} kWh`;
        document.getElementById('energy-price').textContent = formatRupiah(energyPrice);
        document.getElementById('pjn').textContent = formatRupiah(pjn);
        document.getElementById('admin-fee').textContent = formatRupiah(adminFee);
        document.getElementById('subtotal').textContent = formatRupiah(subtotal);
        document.getElementById('vat').textContent = formatRupiah(vat);
        document.getElementById('total-payable').textContent = formatRupiah(totalPayable);
        document.getElementById('paid-with').textContent = formatRupiah(totalPayable);
    }

    // Generate a receipt on initial page load
    window.onload = function() {
        generateReceipt('medium');
    };
</script>

</body>
</html>
